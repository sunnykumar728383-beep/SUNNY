<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> HAPPY BIRTHDAY</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      height: 100vh;
      background: linear-gradient(135deg, #f9a8d4, #f3e8ff);
    }
    #app { position: relative; width: 100%; height: 100%; }
    #content {
      position: relative;
      z-index: 10;
      width: 100%; height: 100%;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
    }
    .step {
      position: absolute;
      width: 100%; max-width: 800px;
      padding: 40px;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      text-align: center;
      opacity: 0; transform: translateY(20px);
      transition: all 0.8s ease;
      pointer-events: none;
    }
    .step.active { opacity: 1; transform: translateY(0); pointer-events: auto; }

    .btn {
      background: linear-gradient(135deg, #ec4899, #f43f5e);
      color: #fff; padding: 12px 24px;
      border-radius: 50px; font-weight: 600;
      cursor: pointer; margin-top: 20px;
      box-shadow: 0 4px 15px rgba(236,72,153,0.3);
      transition: all 0.3s ease;
    }
    .btn:hover { transform: translateY(-2px); }
    .btn:active { transform: translateY(0); }
    .text-gradient {
      background: linear-gradient(135deg, #ec4899, #f43f5e, #f59e0b);
      -webkit-background-clip: text; color: transparent;
    }
    .emoji { font-size: 3rem; margin-bottom: 20px; }

    #progress-container {
      position: fixed; top: 20px; left: 50%;
      transform: translateX(-50%);
      width: 80%; max-width: 400px;
      height: 6px; background: rgba(255,255,255,0.3);
      border-radius: 3px; z-index: 100;
    }
    #progress-bar {
      height: 100%; width: 0%;
      background: linear-gradient(90deg,#ec4899,#f43f5e);
      border-radius: 3px; transition: width 0.5s ease;
    }
    #canvas-container {
      position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; z-index: 1;
    }

    /* --- Cake --- */
    .cake-container { position: relative; display: inline-block; }
    .cake {
      width: 220px; height: 120px;
      position: relative; margin: auto;
    }
    .cake-slice {
      position: absolute; width: 50%; height: 100%;
      background: pink; top: 0;
      transition: transform 1s ease;
    }
    .cake-slice::after {
      content: ""; position: absolute;
      width: 100%; height: 20px; bottom: 0;
      background: #ffb6c1; /* icing */
    }
    .left-slice {
      left: 0; border-top-left-radius: 10px;
      border-bottom-left-radius: 10px;
    }
    .right-slice {
      right: 0; border-top-right-radius: 10px;
      border-bottom-right-radius: 10px;
    }
    .cut .left-slice { transform: translateX(-120%); }
    .cut .right-slice { transform: translateX(120%); }

    /* Candle */
    .candle {
      width: 12px; height: 40px;
      background: #ffeb3b;
      position: absolute; top: -40px; left: 50%;
      transform: translateX(-50%);
      border-radius: 3px;
    }
    .flame {
      width: 15px; height: 20px;
      background: orange; border-radius: 50%;
      position: absolute; top: -20px; left: 50%;
      transform: translateX(-50%);
      animation: flicker 0.5s infinite alternate;
    }
    @keyframes flicker {
      from { transform: translateX(-50%) scale(1); opacity: 1; }
      to { transform: translateX(-50%) scale(1.2); opacity: 0.8; }
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="canvas-container"></div>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="content">

      <!-- Step 1 -->
      <div class="step active" id="step1">
        <div class="emoji">‚ù§Ô∏è</div>
        <h1 class="text-4xl font-bold mb-6 text-gradient">Hey</h1>
        <p class="text-xl text-gray-700 mb-8">I made something special for you...</p>
        <button class="btn" id="start-btn">Let's Begin</button>
      </div>

      <!-- Step 2 -->
      <div class="step" id="step2">
        <div class="emoji">üéâ</div>
        <h2 class="text-3xl font-bold mb-6 text-gradient">Happy Birthday!</h2>
        <p class="text-lg text-gray-700 mb-6">HOPE YOU HAVE A GREAT MOVEMENT TODAY</p>
        <button class="btn" id="next-btn-2">CLICK HERE</button>
      </div>

      <!-- Step 3 -->
      <div class="step" id="step3">
        <div class="emoji">üåü</div>
        <p class="text-lg text-gray-700 mb-6"></p>
        <button class="btn" id="next-btn-3">Continue</button>
      </div>

      <!-- Step 4 -->
      <div class="step" id="step4">
        <div class="emoji">üíå</div>
        <p class="text-lg text-gray-700 mb-6"></p>
        <button class="btn" id="next-btn-4">Almost There</button>
      </div>

      <!-- Step 5 -->
      <div class="step" id="step5">
        <div class="emoji">üéä</div>
        <h2 class="text-3xl font-bold text-gradient mb-6">Celebration Time!</h2>
        <button class="btn" id="confetti-btn">Celebrate üéâ</button>
        <button class="btn" id="next-btn-5">Cut the Cake üç∞</button>
      </div>

      <!-- Step 6 (Cake) -->
      <div class="step" id="step6">
        <div class="emoji">üç∞</div>
        <h2 class="text-3xl font-bold text-gradient mb-6">Here‚Äôs Your Cake!</h2>
        <div class="cake-container">
          <div class="cake" id="cake">
            <div class="candle"><div class="flame"></div></div>
            <div class="cake-slice left-slice"></div>
            <div class="cake-slice right-slice"></div>
          </div>
        </div>
        <button class="btn" id="cut-btn">Cut the Cake</button>
        <button class="btn" id="reset-cake">Reset</button>
      </div>
    </div>
  </div>

  <script>
    // Hearts BG
    const container = document.getElementById('canvas-container');
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.z = 30;

    const heartShape = new THREE.Shape();
    heartShape.moveTo(0.5,0.5);
    heartShape.bezierCurveTo(0.5,0.5,1,0,0,0);
    heartShape.bezierCurveTo(-1,0,-1,1.5,-1,1.5);
    heartShape.bezierCurveTo(-1,2.5,0.5,3.5,0.5,3.5);
    heartShape.bezierCurveTo(0.5,3.5,2,2.5,2,1.5);
    heartShape.bezierCurveTo(2,1.5,2,0,1,0);
    heartShape.bezierCurveTo(0.5,0,0.5,0.5,0.5,0.5);

    const heartGeometry = new THREE.ExtrudeGeometry(heartShape,{depth:0.5, bevelEnabled:true, bevelSegments:2, bevelSize:0.2, bevelThickness:0.3});
    const hearts=[];
    for(let i=0;i<20;i++){
      const mat=new THREE.MeshPhongMaterial({color:0xff6b6b,transparent:true,opacity:0.9});
      const h=new THREE.Mesh(heartGeometry,mat);
      h.position.set((Math.random()-0.5)*40,(Math.random()-0.5)*40,(Math.random()-0.5)*40);
      h.scale.setScalar(Math.random()*0.6+0.4);
      scene.add(h); hearts.push(h);
    }
    scene.add(new THREE.AmbientLight(0xffffff,0.5));
    const light=new THREE.DirectionalLight(0xffffff,0.8); light.position.set(1,1,1); scene.add(light);
    function animate(){ requestAnimationFrame(animate); hearts.forEach(h=>{h.rotation.x+=0.01;h.rotation.y+=0.01;}); renderer.render(scene,camera);}
    animate();
    window.addEventListener('resize',()=>{camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);});

    // Steps
    let currentStep=1; const totalSteps=6;
    function updateProgressBar(){document.getElementById('progress-bar').style.width=`${((currentStep-1)/(totalSteps-1))*100}%`;}
    function showStep(n){document.querySelectorAll('.step').forEach(s=>s.classList.remove('active'));document.getElementById(`step${n}`).classList.add('active');updateProgressBar();}
    document.getElementById('start-btn').onclick=()=>{currentStep=2;showStep(currentStep);}
    document.getElementById('next-btn-2').onclick=()=>{currentStep=3;showStep(currentStep);}
    document.getElementById('next-btn-3').onclick=()=>{currentStep=4;showStep(currentStep);}
    document.getElementById('next-btn-4').onclick=()=>{currentStep=5;showStep(currentStep);}
    document.getElementById('next-btn-5').onclick=()=>{currentStep=6;showStep(currentStep);}
    document.getElementById('confetti-btn').onclick=()=>{confetti({particleCount:150,spread:70,origin:{y:0.6}});}
    // Cake cut
    const cake=document.getElementById('cake');
    document.getElementById('cut-btn').onclick=()=>cake.classList.add('cut');
    document.getElementById('reset-cake').onclick=()=>cake.classList.remove('cut');
    updateProgressBar();
  </script>
</body>
</html>